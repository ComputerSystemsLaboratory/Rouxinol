#include<iostream>
#include<string>
#include<cctype>
#include <algorithm>
#define rep(i,start,n) for(int i=start ; i<n ; i++)
#define REP(i,start,n) for(int j=start ; j<=n ; j++)

using namespace std;

int main(){

  int x=0;                               //???????????°
  int a=0,b=0;                           //??????????????¨??????
  string first,change,sent;                   //???????????¨??????????????§??????

  cin >> first;                            //???????????????????????\???
  cin >> x;                                //???????????°?????\???

  rep(i,0,x){                             //?????????????????¨????????????

    cin >> change >> a >> b ;                //?????????????????????????????¨???????????\???

    if(change == "replace"){                 //??????????????????????????´???
      cin >> sent;                           //?????????????????????????????\???
      REP(j,a,b){                            //a~b???????????§??????????????????
        first[j] = sent[j-a];                //???????????????????????\?????????????????????????§?????????????
      }
    }
    else if(change =="reverse"){                       //????????????????????\??????????????´???
      reverse(first.begin() + a,first.begin() + b + 1);                //reverse??¢??°?????¨??????????????????????????????
    }
    else if(change =="print"){                      //??¨????????´???
      REP(j,a,b){                                        //??¨?????¨??????????????????
        cout << first[j];                              //??¨???
        if(j==b){                                       //??????????????????????????£?????¨??????????????????
          cout << endl;
        }
      }
    }
  }

  return 0;

}