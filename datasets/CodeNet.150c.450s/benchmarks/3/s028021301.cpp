#include<iostream>
#include<cmath>
#include<string>
#include<cstdlib>
#include<stdio.h>
#include<cctype>
#include<algorithm>
#include<string.h>
#include<iomanip>
using namespace std;
string a;
void replace(int m,int n,string b)//m????§???????n?????¢???,??????????????????????????¨?????¨??´?????????????\????????????¶?????±????????\????????\

{
	int k=0;
	for(int i=m;i<=n;i++)//??±??????????????????????????§?????\???????????????????????????.
		a[i]=b[k++];




}
	
	
	
	void reverse(int m,int n)
{
	for(int i=n;i>m;i--)
	{		char b;
			b=a[i];//????????°?????¬??????????????¨char

			a[i]=a[m];//??????????????????????????¶????????¬?????¬?????????????????\m??????,??????????????§?????????.
			a[m]=b;//???????????¬??\?°±?????????????¬???????????¬?????????¬
			m++;
	}
			

			




}
void print(int m,int n)
{
	for(int i=m;i<=n;i++)
		cout<<a[i];
	cout<<endl;



}










int main()
{
	string b,c;
	int m,n,k;
	cin>>a;
	cin>>k;
	for(int i=0;i<k;i++)//k?¬???????
	{
		cin>>c;
		if(c=="replace")//????????¨switch????????????
			{
				cin>>m>>n>>b;
			replace(m,n,b);
			
		}
		if(c=="reverse")
			{
				cin>>m>>n;
			reverse(m,n);
		
		}
		if(c=="print")
		{
			cin>>m>>n;
			print(m,n);
			
		}

	
	
	
	}
	
	
}
	