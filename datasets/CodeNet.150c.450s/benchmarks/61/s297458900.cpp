#include<stdio.h>
#define N (x=(a*x+b)%c),++i
int main()
{
	int n,a,b,c,x,y,i;
	while(scanf("%d%d%d%d%d",&n,&a,&b,&c,&x),n)
	{
		i=0;
		while(n--)
		{
			scanf("%d",&y);
			while(y-x)if(N,i>10000)goto E;
			N;
		}
		printf("%d\n",i-1);
		continue;
E:puts("-1");while(n--)scanf("%*d");
	}
	return 0;
}